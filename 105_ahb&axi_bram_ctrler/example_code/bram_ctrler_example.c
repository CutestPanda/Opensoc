/************************************************************************************************************************
BRAM控制器示例代码
@brief  读写BRAM示例
@date   2024/09/01
@author 陈家耀
@eidt   2024/09/01 1.00 创建了第一个正式版本
************************************************************************************************************************/

#include <stdint.h>

////////////////////////////////////////////////////////////////////////////////////////////////////////////

typedef uint32_t BRAM_handler;

////////////////////////////////////////////////////////////////////////////////////////////////////////////

#define BRAM_CTRLER_BASEADDR 0x60000000 // BRAM控制器基地址

////////////////////////////////////////////////////////////////////////////////////////////////////////////

static BRAM_handler* bram; // BRAM控制器句柄

////////////////////////////////////////////////////////////////////////////////////////////////////////////

void bram_read_write_example(void){
	bram = (BRAM_handler*)BRAM_CTRLER_BASEADDR; // 初始化BRAM控制器句柄
	
	// 写BRAM
	for(uint32_t i = 0;i < 100;i++){
		bram[i] = i + 1;
	}
	
	// 读BRAM
	uint8_t verify_ok = 1;
	
	for(uint32_t i = 0;i < 100;i++){
		if(bram[i] != (i + 1)){
			verify_ok = 0;
			
			break;
		}
	}
	
	// 验证读写数据一致性
	if(verify_ok){
		// 读写一致
		// ...
	}else{
		// 读写不一致
		// ...
	}
	
	while(1);
}
